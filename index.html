<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NBK Jambo Pay Leave Rotation System - Automated staff leave management with iOS-inspired interface">
    <meta name="keywords" content="NBK, leave rotation, staff management, HR, schedule">
    <meta name="author" content="Software Engineer Pius Maina">
    <title>NBK Jambo Pay | Leave Rotation System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Light Mode Default - iOS Inspired */
            --ios-primary: #007AFF;
            --ios-primary-light: rgba(0, 122, 255, 0.15);
            --ios-primary-dark: #0056CC;
            --ios-secondary: #34C759;
            --ios-accent: #5AC8FA;
            --ios-bubble: #D9FDD3;
            --ios-chat-bg: #F2F2F7;
            --ios-gray: #8E8E93;
            --ios-gray-light: #E5E5EA;
            --ios-light-gray: #FFFFFF;
            --ios-card-bg: rgba(255, 255, 255, 0.85);
            --ios-border: rgba(0, 0, 0, 0.1);
            --ios-text: #1D1D1F;
            --ios-text-secondary: #6D6D70;
            --ios-green: #34C759;
            --ios-green-light: rgba(52, 199, 89, 0.15);
            --ios-orange: #FF9500;
            --ios-orange-light: rgba(255, 149, 0, 0.15);
            --ios-red: #FF3B30;
            --ios-red-light: rgba(255, 59, 48, 0.15);
            --ios-purple: #AF52DE;
            --ios-purple-light: rgba(175, 82, 222, 0.15);
            --ios-teal: #5AC8FA;
            --ios-teal-light: rgba(90, 200, 250, 0.15);
            --ios-yellow: #FFCC00;
            --ios-yellow-light: rgba(255, 204, 0, 0.15);
            
            /* Dark Mode Variables - Will be overridden when dark mode is active */
            --dark-bg: #000000;
            --dark-card: #1C1C1E;
            --dark-text: #FFFFFF;
            --dark-text-secondary: #8E8E93;
            --dark-border: #38383A;
            
            /* Liquid Glass Effects */
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.2);
            --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
            --glass-blur: blur(20px) saturate(180%);
            
            /* Gradients */
            --gradient-primary: linear-gradient(135deg, #007AFF 0%, #5856D6 100%);
            --gradient-secondary: linear-gradient(135deg, #34C759 0%, #5AC8FA 100%);
            --gradient-warning: linear-gradient(135deg, #FF9500 0%, #FFCC00 100%);
            --gradient-danger: linear-gradient(135deg, #FF3B30 0%, #FF9500 100%);
            --gradient-glass: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.4) 100%);
            --gradient-auth: linear-gradient(135deg, #007AFF 0%, #34C759 50%, #5AC8FA 100%);
            
            /* Animation */
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-fast: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Typography */
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
            
            /* Layout */
            --ios-radius: 14px;
            --ios-radius-sm: 10px;
            --ios-radius-lg: 20px;
            --ios-radius-xl: 28px;
            
            /* Shadows */
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.15);
            
            /* Footer Navigation */
            --footer-height: 60px;
        }

        /* Dark Mode Overrides */
        body.dark-mode {
            --ios-chat-bg: #000000;
            --ios-card-bg: rgba(28, 28, 30, 0.8);
            --ios-border: rgba(255, 255, 255, 0.1);
            --ios-text: #FFFFFF;
            --ios-text-secondary: #8E8E93;
            --ios-gray: #8E8E93;
            --ios-gray-light: #2C2C2E;
            --ios-light-gray: #1C1C1E;
            --glass-bg: rgba(28, 28, 30, 0.7);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
            --gradient-glass: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.02) 100%);
            
            .staff-card {
                background: var(--ios-card-bg);
                border: 1px solid var(--ios-border);
            }
            
            .staff-dates {
                background: rgba(255, 255, 255, 0.03);
                border: 1px solid rgba(255, 255, 255, 0.05);
            }
            
            .timeline-item, .note-card, .admin-card {
                background: var(--ios-card-bg);
                border: 1px solid var(--ios-border);
            }
            
            .btn-secondary {
                background: rgba(255, 255, 255, 0.08);
                color: var(--ios-text);
                border: 1px solid rgba(255, 255, 255, 0.15);
            }
            
            .ios-input {
                background: rgba(255, 255, 255, 0.05);
                color: var(--ios-text);
                border: 2px solid rgba(255, 255, 255, 0.1);
            }
            
            .auth-container {
                background: rgba(28, 28, 30, 0.9);
                border: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .auth-glass {
                background: rgba(28, 28, 30, 0.8);
            }
        }

        /* Reset & Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: var(--font-family);
            background: var(--ios-chat-bg);
            color: var(--ios-text);
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            line-height: 1.5;
            padding-bottom: var(--footer-height);
            transition: background-color 0.5s ease;
        }

        /* Liquid Glass Base */
        .glass {
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow);
        }

        /* Enhanced Navigation */
        .navbar {
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 16px 24px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            animation: slideDown 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
            transition: var(--transition);
        }

        body.dark-mode .navbar {
            background: rgba(0, 0, 0, 0.9);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-shrink: 0;
        }

        .logo {
            width: 44px;
            height: 44px;
            background: var(--gradient-primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            font-weight: 700;
            box-shadow: 0 8px 24px rgba(0, 122, 255, 0.3);
            animation: float 6s ease-in-out infinite;
            transition: var(--transition);
        }

        .logo-text {
            font-size: 20px;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.3px;
        }

        .nav-controls {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }

        /* Theme Toggle */
        .theme-toggle {
            background: var(--ios-gray-light);
            border: none;
            color: var(--ios-text);
            font-size: 18px;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: var(--transition);
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-toggle:hover {
            background: var(--ios-primary-light);
            transform: rotate(15deg);
        }

        /* iOS Toggle Switch */
        .toggle-container {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            font-size: 14px;
            color: var(--ios-text-secondary);
            white-space: nowrap;
            background: rgba(0, 0, 0, 0.03);
            padding: 8px 16px;
            border-radius: var(--ios-radius);
            border: 1px solid var(--ios-border);
        }

        body.dark-mode .toggle-container {
            background: rgba(255, 255, 255, 0.03);
        }

        .toggle-switch {
            position: relative;
            width: 52px;
            height: 32px;
            flex-shrink: 0;
        }

        .toggle-checkbox {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--ios-gray-light);
            transition: var(--transition);
            border-radius: 34px;
            overflow: hidden;
        }

        body.dark-mode .toggle-slider {
            background: var(--ios-gray-light);
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 24px;
            width: 24px;
            left: 4px;
            bottom: 4px;
            background: white;
            transition: var(--transition);
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            z-index: 2;
        }

        .toggle-slider:after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-primary);
            opacity: 0;
            transition: var(--transition);
        }

        .toggle-checkbox:checked + .toggle-slider:before {
            transform: translateX(20px);
        }

        .toggle-checkbox:checked + .toggle-slider:after {
            opacity: 1;
        }

        /* Enhanced Authentication Modal - iOS Liquid Glass Design */
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.4s ease-out;
            padding: 20px;
        }

        body.dark-mode .auth-modal {
            background: rgba(0, 0, 0, 0.85);
        }

        .auth-modal.active {
            display: flex;
        }

        .auth-glass {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(60px);
            -webkit-backdrop-filter: blur(60px);
            border-radius: var(--ios-radius-xl);
            padding: 40px;
            width: 100%;
            max-width: 440px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.15),
                0 0 0 1px rgba(255, 255, 255, 0.1) inset;
            animation: slideUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .auth-glass::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            right: -50%;
            bottom: -50%;
            background: radial-gradient(circle at 30% 30%, rgba(0, 122, 255, 0.1) 0%, transparent 60%),
                       radial-gradient(circle at 70% 70%, rgba(52, 199, 89, 0.1) 0%, transparent 60%);
            pointer-events: none;
            animation: rotate 20s linear infinite;
        }

        .auth-header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
            z-index: 1;
        }

        .auth-logo {
            width: 70px;
            height: 70px;
            background: var(--gradient-auth);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: white;
            font-size: 28px;
            box-shadow: 0 12px 32px rgba(0, 122, 255, 0.3);
            animation: float 4s ease-in-out infinite;
        }

        .auth-title {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 8px;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.5px;
        }

        .auth-subtitle {
            color: var(--ios-text-secondary);
            font-size: 16px;
            line-height: 1.5;
            max-width: 320px;
            margin: 0 auto;
        }

        .auth-form {
            position: relative;
            z-index: 1;
        }

        .input-group {
            margin-bottom: 24px;
        }

        .input-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 15px;
            color: var(--ios-text);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .input-label i {
            color: var(--ios-primary);
            width: 20px;
            text-align: center;
        }

        .ios-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid rgba(0, 0, 0, 0.1);
            border-radius: var(--ios-radius);
            font-size: 16px;
            transition: var(--transition);
            background: rgba(255, 255, 255, 0.9);
            color: var(--ios-text);
            font-family: var(--font-family);
            font-weight: 500;
        }

        body.dark-mode .ios-input {
            background: rgba(255, 255, 255, 0.05);
            color: var(--ios-text);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .ios-input:focus {
            outline: none;
            border-color: var(--ios-primary);
            box-shadow: 0 0 0 4px rgba(0, 122, 255, 0.15);
            background: rgba(255, 255, 255, 1);
            transform: translateY(-2px);
        }

        body.dark-mode .ios-input:focus {
            background: rgba(255, 255, 255, 0.08);
        }

        .ios-input::placeholder {
            color: var(--ios-text-secondary);
            opacity: 0.7;
        }

        .password-container {
            position: relative;
        }

        .toggle-password {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--ios-text-secondary);
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: var(--transition);
        }

        .toggle-password:hover {
            color: var(--ios-primary);
            background: rgba(0, 122, 255, 0.1);
        }

        .auth-actions {
            display: flex;
            gap: 12px;
            margin-top: 32px;
        }

        .auth-btn {
            flex: 1;
            padding: 18px;
            border-radius: var(--ios-radius);
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            border: none;
            outline: none;
            position: relative;
            overflow: hidden;
        }

        .auth-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), transparent);
            opacity: 0;
            transition: var(--transition);
        }

        .auth-btn:hover::before {
            opacity: 1;
        }

        .auth-btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 8px 24px rgba(0, 122, 255, 0.3);
        }

        .auth-btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(0, 122, 255, 0.4);
        }

        .auth-btn-secondary {
            background: rgba(0, 0, 0, 0.03);
            color: var(--ios-text);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        body.dark-mode .auth-btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .auth-btn-secondary:hover:not(:disabled) {
            background: rgba(0, 0, 0, 0.06);
            transform: translateY(-2px);
        }

        body.dark-mode .auth-btn-secondary:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.08);
        }

        .auth-footer {
            margin-top: 32px;
            text-align: center;
            color: var(--ios-text-secondary);
            font-size: 13px;
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }

        .auth-footer a {
            color: var(--ios-primary);
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
        }

        .auth-footer a:hover {
            text-decoration: underline;
        }

        .auth-error {
            background: rgba(255, 59, 48, 0.1);
            color: var(--ios-red);
            padding: 16px;
            border-radius: var(--ios-radius);
            margin-bottom: 24px;
            display: none;
            align-items: center;
            gap: 10px;
            animation: slideInRight 0.3s ease-out;
            border: 1px solid rgba(255, 59, 48, 0.2);
            position: relative;
            z-index: 1;
        }

        .auth-error.show {
            display: flex;
        }

        .auth-success {
            background: rgba(52, 199, 89, 0.1);
            color: var(--ios-green);
            padding: 16px;
            border-radius: var(--ios-radius);
            margin-bottom: 24px;
            display: none;
            align-items: center;
            gap: 10px;
            animation: slideInRight 0.3s ease-out;
            border: 1px solid rgba(52, 199, 89, 0.2);
            position: relative;
            z-index: 1;
        }

        .auth-success.show {
            display: flex;
        }

        .credential-hint {
            background: rgba(0, 122, 255, 0.05);
            padding: 16px;
            border-radius: var(--ios-radius);
            margin-top: 24px;
            font-size: 13px;
            color: var(--ios-text-secondary);
            border: 1px solid rgba(0, 122, 255, 0.1);
            position: relative;
            z-index: 1;
        }

        .credential-hint strong {
            color: var(--ios-primary);
            font-weight: 700;
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px;
            width: 100%;
        }

        /* Enhanced Dashboard Header */
        .dashboard-header {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(0, 122, 255, 0.15) 100%);
            border-radius: var(--ios-radius-xl);
            padding: 36px;
            margin-bottom: 24px;
            position: relative;
            overflow: hidden;
            animation: fadeIn 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(0, 122, 255, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        body.dark-mode .dashboard-header {
            background: linear-gradient(135deg, rgba(28, 28, 30, 0.8) 0%, rgba(0, 122, 255, 0.2) 100%);
            border: 1px solid rgba(0, 122, 255, 0.2);
        }

        .dashboard-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(0, 122, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(90, 200, 250, 0.05) 0%, transparent 50%);
            pointer-events: none;
        }

        .dashboard-title {
            font-size: 36px;
            font-weight: 800;
            margin-bottom: 8px;
            position: relative;
            letter-spacing: -0.5px;
            line-height: 1.2;
        }

        .dashboard-subtitle {
            font-size: 18px;
            color: var(--ios-text-secondary);
            margin-bottom: 24px;
            font-weight: 500;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 32px;
        }

        .stat-card {
            background: var(--glass-bg);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-radius: var(--ios-radius-lg);
            padding: 24px;
            border: 1px solid var(--glass-border);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        body.dark-mode .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-card:hover {
            transform: translateY(-6px);
            border-color: var(--ios-primary);
            box-shadow: var(--shadow-lg);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-primary);
            opacity: 0;
            transition: var(--transition);
        }

        .stat-card:hover::before {
            opacity: 1;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 800;
            margin-bottom: 6px;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 15px;
            color: var(--ios-text-secondary);
            font-weight: 500;
        }

        /* Progress Bar */
        .progress-container {
            width: 100%;
            height: 8px;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 32px;
        }

        body.dark-mode .progress-container {
            background: rgba(255, 255, 255, 0.05);
        }

        .progress-bar {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 4px;
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        /* Enhanced Staff Cards */
        .staff-section {
            background: var(--glass-bg);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-radius: var(--ios-radius-xl);
            padding: 32px;
            margin-bottom: 24px;
            border: 1px solid var(--glass-border);
            animation: slideUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.2s both;
            position: relative;
            overflow: hidden;
        }

        .staff-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            right: -50%;
            bottom: -50%;
            background: radial-gradient(circle at 50% 50%, rgba(0, 122, 255, 0.1) 0%, transparent 70%);
            pointer-events: none;
        }

        .section-header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 28px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--ios-border);
            gap: 20px;
        }

        .section-title {
            font-size: 28px;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 16px;
            letter-spacing: -0.3px;
        }

        .section-title i {
            color: var(--ios-primary);
            background: var(--ios-primary-light);
            padding: 12px;
            border-radius: 16px;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .controls {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
        }

        /* iOS Buttons */
        .btn {
            padding: 16px 28px;
            border-radius: var(--ios-radius);
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 10px;
            border: none;
            outline: none;
            text-decoration: none;
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            user-select: none;
            -webkit-user-select: none;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), transparent);
            opacity: 0;
            transition: var(--transition);
        }

        .btn:hover::before {
            opacity: 1;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 8px 24px rgba(0, 122, 255, 0.3);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 12px 32px rgba(0, 122, 255, 0.4);
        }

        .btn-secondary {
            background: rgba(0, 0, 0, 0.03);
            color: var(--ios-text);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .btn-secondary:hover:not(:disabled) {
            background: rgba(0, 0, 0, 0.06);
            transform: translateY(-3px);
        }

        body.dark-mode .btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            color: var(--ios-text);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .btn-secondary:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.08);
        }

        .btn-danger {
            background: var(--gradient-danger);
            color: white;
            box-shadow: 0 8px 24px rgba(255, 59, 48, 0.3);
        }

        .btn-danger:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 12px 32px rgba(255, 59, 48, 0.4);
        }

        .btn-warning {
            background: var(--gradient-warning);
            color: black;
            box-shadow: 0 8px 24px rgba(255, 149, 0, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Enhanced Staff Grid */
        .staff-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 24px;
        }

        .staff-card {
            background: var(--ios-card-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: var(--ios-radius-lg);
            padding: 28px;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            border: 1px solid var(--ios-border);
            animation: fadeIn 0.5s ease-out;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .staff-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-glass);
            opacity: 0;
            transition: var(--transition);
            pointer-events: none;
        }

        .staff-card:hover {
            transform: translateY(-8px);
            border-color: var(--ios-primary);
            box-shadow: var(--shadow-lg);
        }

        .staff-card:hover::before {
            opacity: 1;
        }

        /* Status-specific styling */
        .staff-card.current {
            border-color: var(--ios-green);
            background: linear-gradient(135deg, rgba(52, 199, 89, 0.1), rgba(52, 199, 89, 0.05));
        }

        .staff-card.next {
            border-color: var(--ios-orange);
            background: linear-gradient(135deg, rgba(255, 149, 0, 0.1), rgba(255, 149, 0, 0.05));
        }

        .staff-card.upcoming {
            border-color: var(--ios-accent);
            background: linear-gradient(135deg, rgba(90, 200, 250, 0.1), rgba(90, 200, 250, 0.05));
        }

        .staff-card.completed {
            opacity: 0.8;
            background: linear-gradient(135deg, rgba(142, 142, 147, 0.05), rgba(142, 142, 147, 0.02));
        }

        .staff-card.completed::after {
            content: 'âœ“';
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--ios-green);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(52, 199, 89, 0.3);
            z-index: 2;
        }

        /* Staff Card Content */
        .staff-header {
            display: flex;
            align-items: flex-start;
            gap: 16px;
        }

        .staff-badge {
            background: var(--ios-primary-light);
            color: var(--ios-primary);
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 700;
            border: 1px solid rgba(0, 122, 255, 0.2);
            flex-shrink: 0;
        }

        body.dark-mode .staff-badge {
            background: rgba(0, 122, 255, 0.2);
            border: 1px solid rgba(0, 122, 255, 0.3);
        }

        .staff-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            color: white;
            font-weight: 800;
            flex-shrink: 0;
            box-shadow: 0 8px 24px rgba(0, 122, 255, 0.3);
            animation: float 6s ease-in-out infinite;
            animation-delay: calc(var(--index, 0) * 0.1s);
        }

        .staff-info {
            flex: 1;
            min-width: 0;
        }

        .staff-name {
            font-size: 20px;
            font-weight: 800;
            margin-bottom: 6px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .staff-status {
            font-size: 14px;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 700;
            display: inline-block;
        }

        .status-current {
            background: var(--ios-green);
            color: white;
        }

        .status-next {
            background: var(--ios-orange);
            color: white;
        }

        .status-upcoming {
            background: var(--ios-accent);
            color: white;
        }

        .status-completed {
            background: var(--ios-gray);
            color: white;
        }

        /* Countdown Timer */
        .countdown-container {
            margin-top: 12px;
        }

        .countdown-label {
            font-size: 13px;
            color: var(--ios-text-secondary);
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .countdown-timer {
            font-size: 16px;
            font-weight: 700;
            background: rgba(0, 0, 0, 0.03);
            padding: 10px 16px;
            border-radius: var(--ios-radius);
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        body.dark-mode .countdown-timer {
            background: rgba(255, 255, 255, 0.05);
        }

        .countdown-timer.ending {
            color: var(--ios-orange);
            animation: pulse 1s infinite;
        }

        .countdown-timer.ended {
            color: var(--ios-red);
        }

        /* Staff Dates */
        .staff-dates {
            background: rgba(0, 0, 0, 0.02);
            padding: 16px;
            border-radius: var(--ios-radius);
            border: 1px solid rgba(0, 0, 0, 0.05);
            font-size: 14px;
            line-height: 1.5;
        }

        body.dark-mode .staff-dates {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .date-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
        }

        .date-label {
            color: var(--ios-text-secondary);
        }

        .date-value {
            font-weight: 600;
        }

        .staff-resume {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
            font-size: 13px;
            color: var(--ios-green);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        body.dark-mode .staff-resume {
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Timeline Section */
        .timeline-section {
            background: var(--glass-bg);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-radius: var(--ios-radius-xl);
            padding: 32px;
            margin-bottom: 24px;
            border: 1px solid var(--glass-border);
            animation: slideUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.4s both;
        }

        .timeline-container {
            position: relative;
            padding-left: 48px;
            margin-top: 24px;
        }

        .timeline-container::before {
            content: '';
            position: absolute;
            left: 24px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: var(--gradient-primary);
            border-radius: 3px;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 28px;
            padding: 24px;
            background: var(--ios-card-bg);
            border-radius: var(--ios-radius);
            border-left: 4px solid var(--ios-primary);
            transition: var(--transition);
            animation: slideInRight 0.5s ease-out;
            animation-delay: calc(var(--index, 0) * 0.1s);
            border: 1px solid var(--ios-border);
        }

        .timeline-item:hover {
            background: rgba(0, 122, 255, 0.03);
            transform: translateX(6px);
            border-left-color: var(--ios-green);
        }

        body.dark-mode .timeline-item:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -32px;
            top: 28px;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: var(--ios-primary);
            border: 3px solid var(--ios-chat-bg);
            box-shadow: 0 0 0 4px rgba(0, 122, 255, 0.2);
            z-index: 2;
        }

        body.dark-mode .timeline-item::before {
            border-color: var(--ios-chat-bg);
        }

        .timeline-date {
            font-weight: 800;
            color: var(--ios-primary);
            margin-bottom: 10px;
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .timeline-content {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .timeline-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--gradient-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 800;
            font-size: 15px;
            flex-shrink: 0;
        }

        .timeline-text {
            font-weight: 600;
            font-size: 15px;
            line-height: 1.5;
        }

        .timeline-duration {
            color: var(--ios-text-secondary);
            font-size: 14px;
            margin-top: 6px;
        }

        /* Admin Panel */
        .admin-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-radius: var(--ios-radius-xl);
            padding: 32px;
            margin-bottom: 24px;
            border: 1px solid var(--glass-border);
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .admin-panel.active {
            display: block;
        }

        .admin-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-top: 32px;
        }

        .admin-card {
            background: var(--ios-card-bg);
            padding: 28px;
            border-radius: var(--ios-radius);
            border: 2px dashed rgba(0, 122, 255, 0.2);
            transition: var(--transition);
            border: 1px solid var(--ios-border);
        }

        .admin-card:hover {
            border-color: var(--ios-primary);
            background: rgba(0, 122, 255, 0.03);
            transform: translateY(-6px);
        }

        body.dark-mode .admin-card:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .admin-card-title {
            font-weight: 800;
            margin-bottom: 20px;
            color: var(--ios-primary);
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 20px;
        }

        .admin-card-title i {
            background: var(--ios-primary-light);
            padding: 10px;
            border-radius: 14px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Footer Navigation */
        .footer-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            border-top: 1px solid rgba(0, 0, 0, 0.05);
            height: var(--footer-height);
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 1000;
            display: none;
        }

        body.dark-mode .footer-nav {
            background: rgba(0, 0, 0, 0.95);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .nav-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: none;
            border: none;
            color: var(--ios-text-secondary);
            padding: 10px 14px;
            border-radius: var(--ios-radius);
            transition: var(--transition);
            cursor: pointer;
            min-width: 64px;
            gap: 4px;
            font-size: 12px;
        }

        .nav-button i {
            font-size: 20px;
        }

        .nav-button:hover, .nav-button.active {
            color: var(--ios-primary);
            background: var(--ios-primary-light);
        }

        /* Footer */
        .footer {
            text-align: center;
            color: var(--ios-text-secondary);
            font-size: 14px;
            padding: 36px 0;
            margin-top: 24px;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
            animation: fadeIn 1s ease-out;
        }

        body.dark-mode .footer {
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .system-info {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 24px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .version-badge {
            background: var(--gradient-primary);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
        }

        .designer-credit {
            color: var(--ios-primary);
            font-weight: 800;
            background: var(--ios-primary-light);
            padding: 8px 16px;
            border-radius: 20px;
        }

        /* Notes Section */
        .notes-section {
            background: var(--glass-bg);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-radius: var(--ios-radius-xl);
            padding: 32px;
            margin-bottom: 24px;
            border: 1px solid var(--glass-border);
            display: none;
        }

        .notes-section.active {
            display: block;
            animation: slideInRight 0.5s ease-out;
        }

        .notes-grid {
            display: grid;
            gap: 20px;
            margin-top: 24px;
        }

        .note-card {
            background: var(--ios-card-bg);
            padding: 24px;
            border-radius: var(--ios-radius);
            border-left: 4px solid var(--ios-purple);
            transition: var(--transition);
            animation: fadeIn 0.5s ease-out;
            border: 1px solid var(--ios-border);
        }

        .note-card:hover {
            background: rgba(175, 82, 222, 0.03);
            transform: translateX(6px);
        }

        body.dark-mode .note-card:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .note-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .note-author {
            font-weight: 800;
            color: var(--ios-purple);
            font-size: 15px;
        }

        .note-date {
            font-size: 13px;
            color: var(--ios-text-secondary);
            background: rgba(0, 0, 0, 0.03);
            padding: 6px 12px;
            border-radius: 12px;
        }

        body.dark-mode .note-date {
            background: rgba(255, 255, 255, 0.05);
        }

        .note-content {
            color: var(--ios-text);
            line-height: 1.6;
            font-size: 15px;
        }

        /* Auto-rotate Indicator */
        .auto-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--ios-green);
            border-radius: 50%;
            margin-left: 6px;
            animation: pulse 2s infinite;
        }

        .auto-indicator.active {
            animation: pulse 1s infinite;
        }

        /* Loading */
        .loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        body.dark-mode .loading {
            background: rgba(0, 0, 0, 0.95);
        }

        .loading.active {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(0, 122, 255, 0.1);
            border-top: 4px solid var(--ios-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            box-shadow: 0 8px 24px rgba(0, 122, 255, 0.2);
        }

        body.dark-mode .spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 24px;
            right: 24px;
            background: var(--glass-bg);
            padding: 20px 28px;
            border-radius: var(--ios-radius-lg);
            box-shadow: var(--shadow-lg);
            border-left: 4px solid var(--ios-green);
            transform: translateX(150%);
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 1000;
            max-width: 360px;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification-title {
            font-weight: 800;
            margin-bottom: 6px;
            font-size: 17px;
            color: var(--ios-text);
        }

        .notification-message {
            color: var(--ios-text-secondary);
            font-size: 15px;
            line-height: 1.4;
        }

        .notification-close {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.03);
            border: none;
            color: var(--ios-text-secondary);
            cursor: pointer;
            padding: 6px;
            border-radius: 8px;
            transition: var(--transition);
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .notification-close:hover {
            background: rgba(0, 0, 0, 0.06);
        }

        body.dark-mode .notification-close {
            background: rgba(255, 255, 255, 0.05);
        }

        body.dark-mode .notification-close:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUp {
            from { transform: translateY(40px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideDown {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideInRight {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .container {
                max-width: 100%;
            }
            
            .staff-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            
            .admin-controls {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }
        }

        @media (max-width: 992px) {
            .navbar {
                flex-direction: column;
                align-items: stretch;
                gap: 16px;
            }
            
            .nav-controls {
                justify-content: space-between;
            }
            
            .dashboard-title {
                font-size: 32px;
            }
            
            .stats-container {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .auth-glass {
                padding: 32px;
                max-width: 380px;
            }
            
            .auth-title {
                font-size: 24px;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .dashboard-header {
                padding: 28px;
            }
            
            .dashboard-title {
                font-size: 28px;
            }
            
            .dashboard-subtitle {
                font-size: 16px;
            }
            
            .section-title {
                font-size: 24px;
            }
            
            .staff-section, .timeline-section, .admin-panel, .notes-section {
                padding: 24px;
            }
            
            .staff-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .controls {
                width: 100%;
                justify-content: stretch;
            }
            
            .btn {
                flex: 1;
                min-width: 140px;
                justify-content: center;
                padding: 14px 20px;
                font-size: 15px;
            }
            
            .timeline-container {
                padding-left: 32px;
            }
            
            .timeline-container::before {
                left: 16px;
            }
            
            .timeline-item::before {
                left: -24px;
            }
            
            .system-info {
                flex-direction: column;
                gap: 12px;
            }
            
            /* Show footer navigation on mobile */
            .footer-nav {
                display: flex;
            }
            
            body {
                padding-bottom: calc(var(--footer-height) + 20px);
            }
            
            .auth-glass {
                padding: 24px;
                max-width: 340px;
            }
            
            .auth-actions {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .btn {
                width: 100%;
            }
            
            .notification {
                right: 16px;
                left: 16px;
                max-width: none;
            }
            
            .footer-nav {
                padding: 0 12px;
            }
            
            .nav-button {
                min-width: 56px;
                padding: 8px 10px;
                font-size: 11px;
            }
            
            .nav-button i {
                font-size: 18px;
            }
            
            .auth-glass {
                padding: 20px;
                max-width: 300px;
            }
            
            .auth-title {
                font-size: 22px;
            }
            
            .auth-logo {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }
        }

        /* Accessibility */
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        :focus-visible {
            outline: 2px solid var(--ios-primary);
            outline-offset: 2px;
        }

        /* Smooth Scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Selection Color */
        ::selection {
            background: rgba(0, 122, 255, 0.2);
            color: var(--ios-text);
        }

        body.dark-mode ::selection {
            background: rgba(0, 122, 255, 0.3);
            color: var(--ios-text);
        }

        /* Print Styles */
        @media print {
            .navbar,
            .controls,
            .btn,
            .notification,
            .loading,
            .auth-modal,
            .footer-nav {
                display: none !important;
            }
            
            body {
                background: white;
                color: black;
                padding-bottom: 0;
            }
            
            .glass {
                background: white;
                border: 1px solid #ddd;
                box-shadow: none;
                backdrop-filter: none;
            }
            
            .staff-card,
            .timeline-item,
            .note-card {
                break-inside: avoid;
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <!-- Enhanced Authentication Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-glass">
            <div class="auth-header">
                <div class="auth-logo">
                    <i class="fas fa-lock"></i>
                </div>
                <h1 class="auth-title">Admin Authentication</h1>
                <p class="auth-subtitle">Enter your credentials to access the administration panel. This area is restricted to authorized personnel only.</p>
            </div>
            
            <div class="auth-error" id="authError">
                <i class="fas fa-exclamation-triangle"></i>
                <span id="errorMessage">Invalid credentials. Please try again.</span>
            </div>
            
            <div class="auth-success" id="authSuccess">
                <i class="fas fa-check-circle"></i>
                <span id="successMessage">Authentication successful! Redirecting...</span>
            </div>
            
            <form class="auth-form" id="authForm" onsubmit="event.preventDefault(); authenticateAdmin();">
                <div class="input-group">
                    <label class="input-label" for="authEmail">
                        <i class="fas fa-envelope"></i> Email Address
                    </label>
                    <input type="email" class="ios-input" id="authEmail" 
                           placeholder="admin@nbk.co.ke" 
                           autocomplete="username"
                           required>
                </div>
                
                <div class="input-group">
                    <label class="input-label" for="authPassword">
                        <i class="fas fa-key"></i> Password
                    </label>
                    <div class="password-container">
                        <input type="password" class="ios-input" id="authPassword" 
                               placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" 
                               autocomplete="current-password"
                               required>
                        <button type="button" class="toggle-password" id="togglePassword" aria-label="Show password">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>
                
                
                
                <div class="auth-actions">
                    <button type="submit" class="auth-btn auth-btn-primary" id="authSubmit">
                        <i class="fas fa-sign-in-alt"></i> Authenticate & Continue
                    </button>
                    <button type="button" class="auth-btn auth-btn-secondary" onclick="cancelAuth()">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </form>
            
            <div class="auth-footer">
                <p><i class="fas fa-shield-alt"></i> Secure Admin Portal â€¢ NBK Jambo Pay HR System</p>
                <p style="margin-top: 8px; font-size: 12px; opacity: 0.7;">
                    Version 3.2.0 â€¢ All activities are logged for security purposes
                </p>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
    </div>

    <!-- Notification System -->
    <div class="notification" id="notification">
        <button class="notification-close" onclick="hideNotification()" aria-label="Close notification">
            <i class="fas fa-times"></i>
        </button>
        <div class="notification-title" id="notificationTitle">Success!</div>
        <div class="notification-message" id="notificationMessage">Operation completed successfully.</div>
    </div>

    <!-- Main Navigation -->
    <nav class="navbar">
        <div class="logo-container">
            <div class="logo">
                <i class="fas fa-calendar-alt"></i>
            </div>
            <h1 class="logo-text">NBK Leave Rotation</h1>
        </div>
        
        <div class="nav-controls">
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                <i class="fas fa-moon" id="themeIcon"></i>
            </button>
            
            <div class="toggle-container">
                <span>Staff View</span>
                <label class="toggle-switch" aria-label="Toggle admin mode">
                    <input type="checkbox" class="toggle-checkbox" id="adminToggle">
                    <span class="toggle-slider"></span>
                </label>
                <span>Admin View</span>
            </div>
            
            <button class="btn btn-secondary" id="notesToggle">
                <i class="fas fa-sticky-note"></i> Staff Notes
            </button>
        </div>
    </nav>

    <!-- Mobile Footer Navigation -->
    <style>
    /* Mobile-only translucent "liquid glass" footer (iOS26-like) */
    .footer-nav-mobile {
        display: none; /* hidden on desktop by default */
        position: fixed;
        left: 50%;
        transform: translateX(-50%);
        bottom: 18px;
        max-width: 820px;
        width: calc(100% - 40px);
        height: 72px;
        border-radius: 36px;
        align-items: center;
        justify-content: space-around;
        padding: 8px 12px;
        z-index: 10000;
        gap: 6px;
        -webkit-tap-highlight-color: transparent;
        /* Liquid glass / translucent surface */
        background: linear-gradient(135deg, rgba(255,255,255,0.55) 0%, rgba(255,255,255,0.36) 100%);
        backdrop-filter: blur(22px) saturate(160%) contrast(1.02);
        -webkit-backdrop-filter: blur(22px) saturate(160%) contrast(1.02);
        border: 1px solid rgba(255,255,255,0.18);
        box-shadow: 0 12px 34px rgba(0,0,0,0.18), inset 0 1px 0 rgba(255,255,255,0.28);
    }
    /* Show only on small screens */
    @media (max-width: 768px) {
        .footer-nav-mobile { display: flex; }
    }
    /* Dark-mode variant */
    body.dark-mode .footer-nav-mobile {
        background: linear-gradient(135deg, rgba(28,28,30,0.48) 0%, rgba(28,28,30,0.28) 100%);
        border: 1px solid rgba(255,255,255,0.06);
        box-shadow: 0 12px 34px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.02);
    }
    /* Buttons inside footer */
    .footer-nav-mobile .nav-button {
        position: relative;
        flex: 1;
        max-width: 140px;
        background: transparent;
        border: none;
        color: var(--ios-text-secondary);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 8px 6px;
        border-radius: 18px;
        gap: 6px;
        font-size: 11px;
        font-weight: 700;
    }
    .footer-nav-mobile .nav-button i { font-size: 20px; }
    /* active visual indicator */
    .footer-nav-mobile .nav-button.active,
    .footer-nav-mobile .nav-button:hover {
        color: var(--ios-primary);
        background: rgba(0,122,255,0.08);
    }
    .footer-nav-mobile .nav-indicator {
        position:absolute;
        bottom:8px;
        left:50%;
        transform:translateX(-50%);
        height:6px;
        width:44px;
        border-radius:12px;
        background: transparent;
        transition: all .25s;
    }
    .footer-nav-mobile .nav-button.active .nav-indicator {
        background: var(--ios-primary);
        box-shadow: 0 8px 24px rgba(0,122,255,0.22);
    }
    /* small badge */
    .footer-nav-mobile .badge-dot { position:absolute; top:8px; right:22%; display:none; width:10px; height:10px; border-radius:50%; background:var(--ios-orange); box-shadow:0 6px 18px rgba(255,149,0,0.18); }
    /* expose id for JS as before: #footerNav */
    </style>

    <nav class="footer-nav-mobile" id="footerNav" role="navigation" aria-label="Mobile footer navigation">
        <button class="nav-button" id="navDashboard" onclick="scrollToSection('dashboard')" aria-label="Dashboard">
            <i class="fas fa-home" style="color:var(--ios-primary)"></i>
            <span>Dashboard</span>
            <span class="nav-indicator" aria-hidden="true"></span>
        </button>

        <button class="nav-button" id="navStaff" onclick="scrollToSection('staff')" aria-label="Staff">
            <i class="fas fa-users"></i>
            <span>Staff</span>
            <span class="nav-indicator" aria-hidden="true"></span>
        </button>

        <button class="nav-button" id="navTimeline" onclick="scrollToSection('timeline')" aria-label="Timeline">
            <i class="fas fa-history"></i>
            <span>Timeline</span>
            <span class="nav-indicator" aria-hidden="true"></span>
        </button>

        <button class="nav-button" id="navNotes" onclick="toggleNotes()" aria-label="Notes">
            <i class="fas fa-sticky-note"></i>
            <span>Notes</span>
            <span class="badge-dot" id="notesBadge" aria-hidden="true"></span>
            <span class="nav-indicator" aria-hidden="true"></span>
        </button>

        <button class="nav-button" id="navAdmin" onclick="toggleAdminFromMobile()" aria-label="Admin">
            <i class="fas fa-lock"></i>
            <span>Admin</span>
            <span class="nav-indicator" aria-hidden="true"></span>
        </button>
    </nav>

    <!-- Main Content -->
    <main class="container">
        <!-- Dashboard Header -->
        <header class="dashboard-header" id="dashboard">
            <h1 class="dashboard-title">Staff Leave Rotation System</h1>
            <p class="dashboard-subtitle">Mandatory 2-Week Leave Schedule â€¢ Starting Next Monday</p>
            
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-value" id="currentLeave">0</div>
                    <div class="stat-label">Currently on Leave</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="completedLeaves">0</div>
                    <div class="stat-label">Leaves Completed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="remainingStaff">0</div>
                    <div class="stat-label">Remaining Staff</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="nextStart">Week 1</div>
                    <div class="stat-label">Next Rotation</div>
                </div>
            </div>
            
            <div class="progress-container" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
            </div>
        </header>

        <!-- Staff Leave Section -->
        <section class="staff-section" id="staff">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-users"></i> Staff Rotation Order
                </h2>
            </div>
            
            <div class="staff-grid" id="staffGrid">
                <!-- Staff cards will be dynamically inserted -->
            </div>
        </section>

        <!-- Timeline Section -->
        <section class="timeline-section" id="timeline">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-history"></i> Leave Timeline
                </h2>
                <button class="btn btn-secondary" id="exportTimeline">
                    <i class="fas fa-download"></i> Export Timeline
                </button>
            </div>
            
            <div class="timeline-container" id="timelineContainer">
                <!-- Timeline items will be dynamically inserted -->
            </div>
        </section>

        <!-- Staff Notes Section -->
        <section class="notes-section" id="notesSection">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-sticky-note"></i> Staff Notes & Messages
                </h2>
                <button class="btn btn-primary" id="addNoteBtn">
                    <i class="fas fa-plus"></i> Add Note
                </button>
            </div>
            
            <div class="notes-grid" id="notesGrid">
                <!-- Notes will be dynamically inserted -->
            </div>
        </section>

        <!-- Admin Panel -->
        <section class="admin-panel" id="adminPanel">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-lock"></i> Administration Panel
                </h2>
                <div class="controls">
                    <button class="btn btn-danger" id="resetSystemBtn">
                        <i class="fas fa-trash"></i> Reset System
                    </button>
                </div>
            </div>
            
            <div class="admin-controls">
                <div class="admin-card">
                    <h3 class="admin-card-title">
                        <i class="fas fa-cog"></i> System Settings
                    </h3>
                    <div class="input-group">
                        <label class="input-label" for="leaveDuration">Leave Duration (Weeks)</label>
                        <input type="number" class="ios-input" id="leaveDuration" value="2" min="1" max="4">
                        <small style="display: block; color: var(--ios-text-secondary); margin-top: 4px; font-size: 13px;">Default is 2 weeks per staff member</small>
                    </div>
                    <div class="input-group">
                        <label class="input-label" for="rotationInterval">Rotation Interval</label>
                        <select class="ios-input" id="rotationInterval">
                            <option value="weekly">Weekly (Every Monday)</option>
                            <option value="biweekly">Bi-Weekly</option>
                            <option value="monthly">Monthly</option>
                        </select>
                        <small style="display: block; color: var(--ios-text-secondary); margin-top: 4px; font-size: 13px;">How often rotations occur</small>
                    </div>
                    <div class="input-group">
                        <label class="input-label" for="autoAdvance">Auto Advance Rotation</label>
                        <select class="ios-input" id="autoAdvance">
                            <option value="true">Enabled</option>
                            <option value="false">Disabled</option>
                        </select>
                        <small style="display: block; color: var(--ios-text-secondary); margin-top: 4px; font-size: 13px;">Automatically advance when leave ends</small>
                    </div>
                    <div class="input-group">
                        <label class="input-label" for="notifications">Notifications</label>
                        <select class="ios-input" id="notifications">
                            <option value="true">Enabled</option>
                            <option value="false">Disabled</option>
                        </select>
                        <small style="display: block; color: var(--ios-text-secondary); margin-top: 4px; font-size: 13px;">Show system notifications</small>
                    </div>
                    <button class="btn btn-primary" onclick="saveSettings()">
                        <i class="fas fa-save"></i> Save Settings
                    </button>
                </div>
                
                <div class="admin-card">
                    <h3 class="admin-card-title">
                        <i class="fas fa-user-plus"></i> Manage Staff
                    </h3>
                    <div class="input-group">
                        <label class="input-label" for="newStaffName">Add New Staff</label>
                        <input type="text" class="ios-input" id="newStaffName" placeholder="Enter staff name">
                        <small style="display: block; color: var(--ios-text-secondary); margin-top: 4px; font-size: 13px;">Enter full name of staff member</small>
                    </div>
                    <button class="btn btn-primary" onclick="addStaff()">
                        <i class="fas fa-plus"></i> Add Staff
                    </button>
                    
                    <div class="input-group" style="margin-top: 20px;">
                        <label class="input-label" for="staffList">Edit Staff List</label>
                        <textarea class="ios-input" id="staffList" rows="6" placeholder="Enter staff names, one per line" style="resize: vertical;"></textarea>
                        <small style="display: block; color: var(--ios-text-secondary); margin-top: 4px; font-size: 13px;">One name per line. This will replace all staff.</small>
                    </div>
                    <button class="btn btn-secondary" onclick="updateStaffList()" style="margin-top: 10px;">
                        <i class="fas fa-sync-alt"></i> Update Staff List
                    </button>
                </div>
                
                <div class="admin-card">
                    <h3 class="admin-card-title">
                        <i class="fas fa-chart-bar"></i> Analytics & Export
                    </h3>
                    <div class="input-group">
                        <label class="input-label" for="exportFormat">Export Data</label>
                        <select class="ios-input" id="exportFormat">
                            <option value="json">JSON Format</option>
                            <option value="csv">CSV Format</option>
                            <option value="txt">Text Report</option>
                        </select>
                        <small style="display: block; color: var(--ios-text-secondary); margin-top: 4px; font-size: 13px;">Choose export format for reports</small>
                    </div>
                    <button class="btn btn-primary" onclick="exportData()">
                        <i class="fas fa-download"></i> Export Data
                    </button>
                    
                    <div class="input-group" style="margin-top: 20px;">
                        <label class="input-label">Manual Rotation Control</label>
                        <div style="display: flex; gap: 12px; margin-top: 8px;">
                            <button class="btn btn-warning" onclick="advanceRotation()" style="flex: 1;">
                                <i class="fas fa-forward"></i> Advance Rotation
                            </button>
                            <button class="btn btn-secondary" onclick="markCurrentCompleted()" style="flex: 1;">
                                <i class="fas fa-check"></i> Complete Current
                            </button>
                        </div>
                        <small style="display: block; color: var(--ios-text-secondary); margin-top: 4px; font-size: 13px;">Manually control the rotation schedule</small>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="system-info">
            <span class="version-badge">v3.2.0</span>
            <span>NBK Jambo Pay Leave Rotation System</span>
            <span class="designer-credit">
                <i class="fas fa-code"></i> Designed by Software Engineer Pius Maina
            </span>
            <span id="lastUpdated">Last updated: Just now</span>
        </div>
        <p style="margin-top: 16px; font-size: 13px; opacity: 0.7;">
            <i class="fas fa-shield-alt"></i> 
            Secure System â€¢ Admin Authentication â€¢ Auto-save Enabled â€¢ Data Protected â€¢ Â© 2026 PHOENIX TECH LTD
        </p>
    </footer>

    <script>
        // Enhanced System Configuration
        const SYSTEM_VERSION = "3.2.0";
        const SYSTEM_NAME = "NBK Jambo Pay Leave Rotation";
        const DESIGNER = "Software Engineer Pius Maina";
        const LEAVE_DURATION_WEEKS = 2;
        const DAYS_IN_WEEK = 7;
        
        // Enhanced Admin Credentials
        const ADMIN_CREDENTIALS = {
            email: "admin@nbk.co.ke",
            password: "Admin@NBK2024!"
        };

        // Initial staff list
        const initialStaff = [
            "KINYAVU MOHAMMED", "FATMA ABDI", "SHARON KARIMI", "JUMA SWALE", "ELIJAH MWADIME", "SOPHIA MBOTELA", 
            "DANIEL OKIRO", "PRAISE MAKENAH", "CAPISTRANO OKOTH", "ISAAC MOSINGI", "SULEIMAN", "GINDO GINDO",
        ];

        // System state
        let systemState = {
            staffData: [],
            autoRotateInterval: null,
            isAutoRotate: false,
            adminMode: false,
            isAuthenticated: false,
            staffNotes: [],
            settings: {
                leaveDuration: LEAVE_DURATION_WEEKS,
                rotationInterval: 'weekly',
                notifications: true,
                autoAdvance: true,
                theme: 'light' // Light mode as default
            },
            authAttempts: 0,
            lastAuthAttempt: null
        };

        // DOM Elements cache
        const elements = {
            // Authentication
            authModal: document.getElementById('authModal'),
            authForm: document.getElementById('authForm'),
            authEmail: document.getElementById('authEmail'),
            authPassword: document.getElementById('authPassword'),
            togglePassword: document.getElementById('togglePassword'),
            authError: document.getElementById('authError'),
            authSuccess: document.getElementById('authSuccess'),
            authSubmit: document.getElementById('authSubmit'),
            errorMessage: document.getElementById('errorMessage'),
            successMessage: document.getElementById('successMessage'),
            
            // Loading and Notification
            loading: document.getElementById('loading'),
            notification: document.getElementById('notification'),
            notificationTitle: document.getElementById('notificationTitle'),
            notificationMessage: document.getElementById('notificationMessage'),
            
            // Navigation
            adminToggle: document.getElementById('adminToggle'),
            themeToggle: document.getElementById('themeToggle'),
            themeIcon: document.getElementById('themeIcon'),
            notesToggle: document.getElementById('notesToggle'),
            footerNav: document.getElementById('footerNav'),
            navDashboard: document.getElementById('navDashboard'),
            navStaff: document.getElementById('navStaff'),
            navTimeline: document.getElementById('navTimeline'),
            navNotes: document.getElementById('navNotes'),
            navAdmin: document.getElementById('navAdmin'),
            
            // Content Sections
            staffGrid: document.getElementById('staffGrid'),
            timelineContainer: document.getElementById('timelineContainer'),
            adminPanel: document.getElementById('adminPanel'),
            notesSection: document.getElementById('notesSection'),
            notesGrid: document.getElementById('notesGrid'),
            
            // Dashboard Stats
            currentLeave: document.getElementById('currentLeave'),
            completedLeaves: document.getElementById('completedLeaves'),
            remainingStaff: document.getElementById('remainingStaff'),
            nextStart: document.getElementById('nextStart'),
            progressBar: document.getElementById('progressBar'),
            
            // Misc
            lastUpdated: document.getElementById('lastUpdated'),
            resetSystemBtn: document.getElementById('resetSystemBtn'),
            addNoteBtn: document.getElementById('addNoteBtn'),
            exportTimeline: document.getElementById('exportTimeline')
        };

        // Initialize the application
        function initApp() {
            showLoading();
            
            // Load all data
            loadAllData();
            
            // Setup event listeners
            setupEventListeners();
            
            // Initialize real-time updates
            initializeRealTimeUpdates();
            
            // Initial render
            renderDashboard();
            updateStats();
            renderNotes();
            updateStaffListTextarea(); // FIXED: Now this function is defined
            
            // Update UI
            updateLastUpdated();
            applyTheme();
            
            // Hide loading
            setTimeout(() => {
                hideLoading();
                showNotification('System Ready', 'Leave rotation system v3.2 initialized successfully.', 'success');
            }, 800);
        }

        // Load all data from localStorage
        function loadAllData() {
            try {
                const savedStaffData = localStorage.getItem('nbkStaffData');
                const savedNotes = localStorage.getItem('nbkStaffNotes');
                const savedSettings = localStorage.getItem('nbkSettings');
                const savedTheme = localStorage.getItem('nbkTheme');
                
                if (savedStaffData) {
                    systemState.staffData = JSON.parse(savedStaffData);
                    // Convert date strings back to Date objects
                    systemState.staffData.forEach(staff => {
                        if (staff.startDateObj) staff.startDateObj = new Date(staff.startDateObj);
                        if (staff.endDateObj) staff.endDateObj = new Date(staff.endDateObj);
                        if (staff.resumeDateObj) staff.resumeDateObj = new Date(staff.resumeDateObj);
                    });
                    updateStaffStatuses();
                } else {
                    initializeStaffData();
                }
                
                if (savedNotes) {
                    systemState.staffNotes = JSON.parse(savedNotes);
                }
                
                if (savedSettings) {
                    systemState.settings = { ...systemState.settings, ...JSON.parse(savedSettings) };
                    // Update UI with loaded settings
                    document.getElementById('leaveDuration').value = systemState.settings.leaveDuration;
                    document.getElementById('rotationInterval').value = systemState.settings.rotationInterval;
                    document.getElementById('autoAdvance').value = systemState.settings.autoAdvance.toString();
                    document.getElementById('notifications').value = systemState.settings.notifications.toString();
                }
                
                if (savedTheme) {
                    systemState.settings.theme = savedTheme;
                }
                
            } catch (error) {
                console.error('Error loading data:', error);
                initializeStaffData();
            }
        }

        // Save all data to localStorage
        function saveAllData() {
            try {
                localStorage.setItem('nbkStaffData', JSON.stringify(systemState.staffData));
                localStorage.setItem('nbkStaffNotes', JSON.stringify(systemState.staffNotes));
                localStorage.setItem('nbkSettings', JSON.stringify(systemState.settings));
                localStorage.setItem('nbkTheme', systemState.settings.theme);
                localStorage.setItem('nbkLastModified', Date.now());
                
            } catch (error) {
                console.error('Error saving data:', error);
                showNotification('Storage Error', 'Could not save data to device storage.', 'error');
            }
        }

        // Initialize staff data
        function initializeStaffData() {
            systemState.staffData = [];
            const today = new Date();
            const nextMonday = getNextMonday(today);
            
            initialStaff.forEach((name, index) => {
                const startDate = new Date(nextMonday);
                startDate.setDate(nextMonday.getDate() + (index * LEAVE_DURATION_WEEKS * DAYS_IN_WEEK));
                
                const endDate = new Date(startDate);
                endDate.setDate(startDate.getDate() + (LEAVE_DURATION_WEEKS * DAYS_IN_WEEK) - 1);
                
                const resumeDate = new Date(endDate);
                resumeDate.setDate(endDate.getDate() + 1);
                
                const now = new Date();
                let status = 'upcoming';
                
                if (index === 0 && now >= startDate && now <= endDate) {
                    status = 'current';
                } else if (index === 0 && now < startDate) {
                    status = 'next';
                } else if (index === 1 && status !== 'current') {
                    status = 'next';
                }
                
                systemState.staffData.push({
                    id: generateId(),
                    name: name,
                    position: index + 1,
                    status: status,
                    leaveStart: formatDate(startDate),
                    leaveEnd: formatDate(endDate),
                    resumeDate: formatDate(resumeDate),
                    startDateObj: startDate,
                    endDateObj: endDate,
                    resumeDateObj: resumeDate,
                    completed: false,
                    lastUpdated: new Date().toISOString()
                });
            });
            
            saveAllData();
        }

        // Setup event listeners
        function setupEventListeners() {
            // Admin toggle with authentication
            elements.adminToggle.addEventListener('change', function() {
                if (this.checked && !systemState.isAuthenticated) {
                    // Show authentication modal
                    showAuthModal();
                    this.checked = false;
                } else if (this.checked && systemState.isAuthenticated) {
                    // Already authenticated, show admin panel
                    systemState.adminMode = true;
                    elements.adminPanel.style.display = 'block';
                    elements.adminPanel.classList.add('active');
                    updateNavButton('navAdmin', true);
                    showNotification('Admin Mode', 'Administrative controls enabled.', 'success');
                    renderDashboard();
                } else {
                    // Switch back to staff view
                    systemState.adminMode = false;
                    elements.adminPanel.style.display = 'none';
                    elements.adminPanel.classList.remove('active');
                    updateNavButton('navAdmin', false);
                    showNotification('Staff Mode', 'Switched to staff view.', 'info');
                    renderDashboard();
                }
            });

            // Theme toggle
            elements.themeToggle.addEventListener('click', toggleTheme);

            // Password visibility toggle
            elements.togglePassword.addEventListener('click', function() {
                const type = elements.authPassword.getAttribute('type') === 'password' ? 'text' : 'password';
                elements.authPassword.setAttribute('type', type);
                this.innerHTML = type === 'password' ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
            });

            // Form submission
            elements.authForm.addEventListener('submit', function(e) {
                e.preventDefault();
                authenticateAdmin();
            });

            // Notes toggle
            elements.notesToggle.addEventListener('click', toggleNotes);
            elements.addNoteBtn.addEventListener('click', addNewNote);

            // Export timeline
            elements.exportTimeline.addEventListener('click', exportTimeline);

            // Reset system button
            elements.resetSystemBtn.addEventListener('click', resetSystem);

            // Save settings on change
            document.getElementById('leaveDuration').addEventListener('change', saveSettings);
            document.getElementById('rotationInterval').addEventListener('change', saveSettings);
            document.getElementById('autoAdvance').addEventListener('change', saveSettings);
            document.getElementById('notifications').addEventListener('change', saveSettings);

            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.ctrlKey && e.key === 'n') {
                    e.preventDefault();
                    addNewNote();
                }
                if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    saveAllData();
                    showNotification('Saved', 'All data saved to device storage.', 'success');
                }
                if (e.key === 'Escape') {
                    hideNotification();
                    if (elements.authModal.classList.contains('active')) {
                        cancelAuth();
                    }
                }
            });

            // Save data before page unload
            window.addEventListener('beforeunload', () => {
                saveAllData();
            });

            // Periodic auto-save
            setInterval(saveAllData, 30000);

            // Scroll events for mobile navigation
            window.addEventListener('scroll', updateActiveNavButton);
        }

        // Show authentication modal
        function showAuthModal() {
            elements.authModal.classList.add('active');
            elements.authError.classList.remove('show');
            elements.authSuccess.classList.remove('show');
            elements.authEmail.value = ADMIN_CREDENTIALS.email;
            elements.authPassword.value = '';
            elements.authEmail.focus();
            document.body.style.overflow = 'hidden';
        }

        // Hide authentication modal
        function hideAuthModal() {
            elements.authModal.classList.remove('active');
            elements.authError.classList.remove('show');
            elements.authSuccess.classList.remove('show');
            document.body.style.overflow = '';
        }

        // Enhanced authentication function
        function authenticateAdmin() {
            const email = elements.authEmail.value.trim();
            const password = elements.authPassword.value;
            
            // Hide any previous messages
            elements.authError.classList.remove('show');
            elements.authSuccess.classList.remove('show');
            
            // Validate inputs
            if (!email || !password) {
                elements.errorMessage.textContent = 'Please enter both email and password';
                elements.authError.classList.add('show');
                shakeElement(elements.authError);
                return;
            }
            
            // Check for rate limiting
            const now = Date.now();
            if (systemState.lastAuthAttempt && (now - systemState.lastAuthAttempt) < 30000) {
                if (systemState.authAttempts >= 3) {
                    elements.errorMessage.textContent = 'Too many attempts. Please wait 30 seconds.';
                    elements.authError.classList.add('show');
                    return;
                }
            }
            
            // Show loading state
            elements.authSubmit.disabled = true;
            elements.authSubmit.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Authenticating...';
            
            // Simulate authentication delay
            setTimeout(() => {
                if (email === ADMIN_CREDENTIALS.email && password === ADMIN_CREDENTIALS.password) {
                    // Successful authentication
                    systemState.isAuthenticated = true;
                    systemState.authAttempts = 0;
                    systemState.lastAuthAttempt = null;
                    
                    // Show success message
                    elements.successMessage.textContent = 'Authentication successful! Granting access...';
                    elements.authSuccess.classList.add('show');
                    
                    // Update UI after delay
                    setTimeout(() => {
                        hideAuthModal();
                        
                        // Enable admin toggle
                        elements.adminToggle.checked = true;
                        systemState.adminMode = true;
                        elements.adminPanel.style.display = 'block';
                        elements.adminPanel.classList.add('active');
                        updateNavButton('navAdmin', true);
                        
                        // Show welcome notification
                        showNotification('Authentication Successful', 'Admin panel access granted.', 'success');
                        
                        // Store authentication session
                        sessionStorage.setItem('nbkAdminAuth', 'true');
                        sessionStorage.setItem('nbkAdminSession', Date.now().toString());
                        
                        // Render dashboard with admin controls
                        renderDashboard();
                        
                        // Reset button state
                        elements.authSubmit.disabled = false;
                        elements.authSubmit.innerHTML = '<i class="fas fa-sign-in-alt"></i> Authenticate & Continue';
                    }, 1000);
                    
                } else {
                    // Failed authentication
                    systemState.authAttempts++;
                    systemState.lastAuthAttempt = Date.now();
                    
                    elements.errorMessage.textContent = 'Invalid email or password. Please try again.';
                    elements.authError.classList.add('show');
                    shakeElement(elements.authError);
                    
                    // Clear password field
                    elements.authPassword.value = '';
                    elements.authPassword.focus();
                    
                    // Reset button state
                    elements.authSubmit.disabled = false;
                    elements.authSubmit.innerHTML = '<i class="fas fa-sign-in-alt"></i> Authenticate & Continue';
                    
                    // Show hint after multiple failures
                    if (systemState.authAttempts >= 2) {
                        setTimeout(() => {
                            showNotification('Hint', 'Use admin@nbk.co.ke / Admin@NBK2024!', 'info');
                        }, 500);
                    }
                }
            }, 1000);
        }

        // Cancel authentication
        function cancelAuth() {
            hideAuthModal();
            elements.adminToggle.checked = false;
            
            // Reset form
            elements.authForm.reset();
            elements.authSubmit.disabled = false;
            elements.authSubmit.innerHTML = '<i class="fas fa-sign-in-alt"></i> Authenticate & Continue';
        }

        // Toggle theme
        function toggleTheme() {
            if (systemState.settings.theme === 'light') {
                systemState.settings.theme = 'dark';
                elements.themeIcon.className = 'fas fa-sun';
            } else {
                systemState.settings.theme = 'light';
                elements.themeIcon.className = 'fas fa-moon';
            }
            
            applyTheme();
            saveAllData();
        }

        // Apply theme
        function applyTheme() {
            if (systemState.settings.theme === 'dark') {
                document.body.classList.add('dark-mode');
                elements.themeIcon.className = 'fas fa-sun';
            } else {
                document.body.classList.remove('dark-mode');
                elements.themeIcon.className = 'fas fa-moon';
            }
        }

        // Toggle notes section
        function toggleNotes() {
            const isHidden = elements.notesSection.style.display === 'none' || !elements.notesSection.style.display;
            elements.notesSection.style.display = isHidden ? 'block' : 'none';
            elements.notesSection.classList.toggle('active', isHidden);
            updateNavButton('navNotes', isHidden);
            
            if (isHidden) {
                elements.notesSection.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Toggle admin from mobile nav
        function toggleAdminFromMobile() {
            if (!systemState.isAuthenticated) {
                showAuthModal();
                return;
            }
            
            if (!systemState.adminMode) {
                // Enable admin mode
                systemState.adminMode = true;
                elements.adminToggle.checked = true;
                elements.adminPanel.style.display = 'block';
                elements.adminPanel.classList.add('active');
                updateNavButton('navAdmin', true);
                showNotification('Admin Mode', 'Administrative controls enabled.', 'success');
            } else {
                // Disable admin mode
                systemState.adminMode = false;
                elements.adminToggle.checked = false;
                elements.adminPanel.style.display = 'none';
                elements.adminPanel.classList.remove('active');
                updateNavButton('navAdmin', false);
                showNotification('Staff Mode', 'Switched to staff view.', 'info');
            }
            
            renderDashboard();
        }

        // Update staff statuses
        function updateStaffStatuses() {
            const now = new Date();
            let hasCurrent = false;
            let hasNext = false;
            
            systemState.staffData.forEach((staff, index) => {
                if (staff.completed) {
                    staff.status = 'completed';
                    return;
                }
                
                if (staff.startDateObj && staff.endDateObj) {
                    const startDate = new Date(staff.startDateObj);
                    const endDate = new Date(staff.endDateObj);
                    
                    if (now >= startDate && now <= endDate) {
                        staff.status = 'current';
                        hasCurrent = true;
                    } else if (now > endDate) {
                        staff.status = 'completed';
                        staff.completed = true;
                    } else if (!hasCurrent && !hasNext) {
                        staff.status = 'next';
                        hasNext = true;
                    } else {
                        staff.status = 'upcoming';
                    }
                }
            });
            
            // Auto-advance if needed and enabled
            if (systemState.settings.autoAdvance) {
                autoAdvanceCheck();
            }
            
            saveAllData();
        }

        // Render dashboard
        function renderDashboard() {
            requestAnimationFrame(() => {
                renderStaffGrid();
                renderTimeline();
                updateProgressBar();
                updateCountdowns();
            });
        }

        // Render staff grid
        function renderStaffGrid() {
            const fragment = document.createDocumentFragment();
            
            systemState.staffData.forEach((staff, index) => {
                const card = document.createElement('div');
                card.className = `staff-card ${staff.status} ${staff.completed ? 'completed' : ''}`;
                card.style.setProperty('--index', index);
                
                const countdown = getCountdownText(staff);
                const isEndingSoon = countdown && countdown.includes('m left');
                
                card.innerHTML = `
                    <div class="staff-header">
                        <span class="staff-badge">#${staff.position}</span>
                        <div class="staff-avatar">${getInitials(staff.name)}</div>
                        <div class="staff-info">
                            <div class="staff-name">${staff.name}</div>
                            <div class="staff-status status-${staff.status}">
                                ${getStatusText(staff.status)}
                            </div>
                        </div>
                    </div>
                    
                    ${countdown ? `
                        <div class="countdown-container">
                            <div class="countdown-label">
                                <i class="far fa-clock"></i> Leave ends in:
                            </div>
                            <div class="countdown-timer ${isEndingSoon ? 'ending' : ''}">
                                ${countdown}
                            </div>
                        </div>
                    ` : ''}
                    
                    <div class="staff-dates">
                        <div class="date-item">
                            <span class="date-label">Start:</span>
                            <span class="date-value">${staff.leaveStart || 'Not scheduled'}</span>
                        </div>
                        <div class="date-item">
                            <span class="date-label">End:</span>
                            <span class="date-value">${staff.leaveEnd || 'Not scheduled'}</span>
                        </div>
                        ${staff.resumeDate ? `
                            <div class="staff-resume">
                                <i class="fas fa-arrow-right"></i>
                                <span>Returns: ${staff.resumeDate}</span>
                            </div>
                        ` : ''}
                    </div>
                    
                    ${systemState.adminMode ? `
                        <div style="margin-top: 16px; display: flex; gap: 12px; justify-content: center;">
                            <button class="btn btn-secondary" style="padding: 10px 16px; font-size: 14px;" 
                                    onclick="editStaff('${staff.id}')">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-danger" style="padding: 10px 16px; font-size: 14px;" 
                                    onclick="removeStaff('${staff.id}')">
                                <i class="fas fa-trash"></i> Remove
                            </button>
                        </div>
                    ` : ''}
                `;
                
                fragment.appendChild(card);
            });
            
            elements.staffGrid.innerHTML = '';
            elements.staffGrid.appendChild(fragment);
        }

        // Get countdown text for staff
        function getCountdownText(staff) {
            if (staff.status !== 'current') return '';
            
            const now = new Date();
            const endDate = new Date(staff.endDateObj);
            const timeLeft = endDate.getTime() - now.getTime();
            
            if (timeLeft <= 0) {
                return 'Leave ended';
            }
            
            const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            
            if (days > 0) {
                return `${days}d ${hours}h`;
            } else if (hours > 0) {
                return `${hours}h ${minutes}m`;
            } else {
                return `${minutes}m left`;
            }
        }

        // Render timeline
        function renderTimeline() {
            const fragment = document.createDocumentFragment();
            const timelineStaff = systemState.staffData.filter(staff => 
                staff.leaveStart && (staff.status === 'completed' || staff.status === 'current')
            ).reverse();
            
            if (timelineStaff.length === 0) {
                const emptyTimeline = document.createElement('div');
                emptyTimeline.className = 'timeline-item';
                emptyTimeline.innerHTML = `
                    <div class="timeline-date">
                        <i class="far fa-calendar"></i> Starting Soon
                    </div>
                    <div class="timeline-content">
                        <div class="timeline-avatar">?</div>
                        <div class="timeline-text">
                            <strong>First Leave Cycle</strong>
                            <div class="timeline-duration">No leaves started yet. First leave begins next Monday.</div>
                        </div>
                    </div>
                `;
                fragment.appendChild(emptyTimeline);
            } else {
                timelineStaff.forEach((staff, index) => {
                    const item = document.createElement('div');
                    item.className = 'timeline-item';
                    item.style.setProperty('--index', index);
                    
                    item.innerHTML = `
                        <div class="timeline-date">
                            <i class="far fa-calendar"></i> ${staff.leaveStart}
                        </div>
                        <div class="timeline-content">
                            <div class="timeline-avatar">${getInitials(staff.name)}</div>
                            <div class="timeline-text">
                                <strong>${staff.name}</strong> started ${systemState.settings.leaveDuration}-week leave
                                <div class="timeline-duration">
                                    ${staff.leaveStart} â†’ ${staff.leaveEnd} 
                                    ${staff.resumeDate ? `(Returns: ${staff.resumeDate})` : ''}
                                </div>
                            </div>
                        </div>
                    `;
                    
                    fragment.appendChild(item);
                });
            }
            
            elements.timelineContainer.innerHTML = '';
            elements.timelineContainer.appendChild(fragment);
        }

        // Render notes
        function renderNotes() {
            const fragment = document.createDocumentFragment();
            
            if (systemState.staffNotes.length === 0) {
                const emptyNote = document.createElement('div');
                emptyNote.className = 'note-card';
                emptyNote.innerHTML = `
                    <div class="note-header">
                        <div class="note-author">System</div>
                        <div class="note-date">${formatDate(new Date())}</div>
                    </div>
                    <div class="note-content">
                        No notes yet. Add your first note using the "Add Note" button above.
                    </div>
                `;
                fragment.appendChild(emptyNote);
            } else {
                systemState.staffNotes.forEach(note => {
                    const noteCard = document.createElement('div');
                    noteCard.className = 'note-card';
                    noteCard.innerHTML = `
                        <div class="note-header">
                            <div class="note-author">${note.author}</div>
                            <div class="note-date">${note.date}</div>
                        </div>
                        <div class="note-content">${note.content}</div>
                    `;
                    fragment.appendChild(noteCard);
                });
            }
            
            elements.notesGrid.innerHTML = '';
            elements.notesGrid.appendChild(fragment);
        }

        // Initialize real-time updates
        function initializeRealTimeUpdates() {
            // Update countdowns every minute
            setInterval(() => {
                updateCountdowns();
            }, 60000);
            
            // Check for auto-advance every 30 seconds
            setInterval(() => {
                if (systemState.settings.autoAdvance) {
                    autoAdvanceCheck();
                }
            }, 30000);
            
            // Update last updated every minute
            setInterval(updateLastUpdated, 60000);
        }

        // Update countdowns
        function updateCountdowns() {
            const countdownElements = document.querySelectorAll('.countdown-timer');
            countdownElements.forEach(el => {
                const card = el.closest('.staff-card');
                const staffName = card.querySelector('.staff-name').textContent;
                const staff = systemState.staffData.find(s => s.name === staffName);
                
                if (staff) {
                    const countdown = getCountdownText(staff);
                    el.textContent = countdown;
                    el.className = 'countdown-timer';
                    
                    if (countdown.includes('m left')) {
                        el.classList.add('ending');
                    } else if (countdown === 'Leave ended') {
                        el.classList.add('ended');
                    }
                }
            });
        }

        // Update stats
        function updateStats() {
            const current = systemState.staffData.filter(staff => staff.status === 'current').length;
            const completed = systemState.staffData.filter(staff => staff.status === 'completed').length;
            const remaining = systemState.staffData.filter(staff => staff.status === 'upcoming' || staff.status === 'next').length;
            
            elements.currentLeave.textContent = current;
            elements.completedLeaves.textContent = completed;
            elements.remainingStaff.textContent = remaining;
            
            const nextRotation = completed + current + 1;
            elements.nextStart.textContent = `Week ${nextRotation}`;
        }

        // Update progress bar
        function updateProgressBar() {
            const totalStaff = systemState.staffData.length;
            const completedStaff = systemState.staffData.filter(staff => 
                staff.status === 'completed' || staff.status === 'current'
            ).length;
            const progress = totalStaff > 0 ? (completedStaff / totalStaff) * 100 : 0;
            
            elements.progressBar.style.width = `${progress}%`;
        }

        // Update last updated timestamp
        function updateLastUpdated() {
            const now = new Date();
            elements.lastUpdated.textContent = `Last updated: ${formatDateTime(now)}`;
        }

        // Scroll to section
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Update active nav button based on scroll
        function updateActiveNavButton() {
            if (window.innerWidth > 768) return;
            
            const sections = ['dashboard', 'staff', 'timeline'];
            const currentScroll = window.scrollY + 100;
            
            let activeSection = 'dashboard';
            
            sections.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                if (section) {
                    const sectionTop = section.offsetTop;
                    const sectionBottom = sectionTop + section.offsetHeight;
                    
                    if (currentScroll >= sectionTop && currentScroll < sectionBottom) {
                        activeSection = sectionId;
                    }
                }
            });
            
            // Update nav buttons
            document.querySelectorAll('.nav-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const activeButton = document.getElementById(`nav${activeSection.charAt(0).toUpperCase() + activeSection.slice(1)}`);
            if (activeButton) {
                activeButton.classList.add('active');
            }
        }

        // Update nav button state
        function updateNavButton(buttonId, isActive) {
            const button = document.getElementById(buttonId);
            if (button) {
                if (isActive) {
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
            }
        }

        // Show notification
        function showNotification(title, message, type = 'success') {
            if (!systemState.settings.notifications) return;
            
            elements.notificationTitle.textContent = title;
            elements.notificationMessage.textContent = message;
            
            const colors = {
                'success': 'var(--ios-green)',
                'error': 'var(--ios-red)',
                'warning': 'var(--ios-orange)',
                'info': 'var(--ios-primary)'
            };
            
            elements.notification.style.borderLeftColor = colors[type] || colors.success;
            elements.notification.classList.add('show');
            
            // Auto-hide after appropriate time
            const hideTime = type === 'error' ? 8000 : 5000;
            setTimeout(hideNotification, hideTime);
        }

        // Hide notification
        function hideNotification() {
            elements.notification.classList.remove('show');
        }

        // Show loading
        function showLoading() {
            elements.loading.classList.add('active');
        }

        // Hide loading
        function hideLoading() {
            elements.loading.classList.remove('active');
        }

        // Shake element animation
        function shakeElement(element) {
            element.style.animation = 'shake 0.5s';
            setTimeout(() => {
                element.style.animation = '';
            }, 500);
        }

        // Utility functions
        function formatDate(date, format = 'short') {
            if (!date) return 'Not scheduled';
            
            const options = {
                short: { month: 'short', day: 'numeric', year: 'numeric' },
                full: { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' },
                'YYYY-MM-DD': {}
            };
            
            if (format === 'YYYY-MM-DD') {
                return date.toISOString().split('T')[0];
            }
            
            return date.toLocaleDateString('en-US', options[format] || options.short);
        }

        function formatDateTime(date) {
            return date.toLocaleString('en-US', {
                month: 'short',
                day: 'numeric',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function getInitials(name) {
            return name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
        }

        function getStatusText(status) {
            const statusMap = {
                'current': 'On Leave Now',
                'next': 'Next in Line',
                'upcoming': 'Upcoming',
                'completed': 'Completed'
            };
            return statusMap[status] || status;
        }

        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        function getNextMonday(date) {
            const result = new Date(date);
            const day = result.getDay();
            const diff = day === 0 ? 1 : 8 - day;
            result.setDate(result.getDate() + diff);
            result.setHours(0, 0, 0, 0);
            return result;
        }

        // FIXED: Added the missing function
        function updateStaffListTextarea() {
            const staffListTextarea = document.getElementById('staffList');
            if (staffListTextarea) {
                const staffNames = systemState.staffData
                    .sort((a, b) => a.position - b.position)
                    .map(staff => staff.name)
                    .join('\n');
                staffListTextarea.value = staffNames;
            }
        }

        // Check for existing admin session on load
        window.addEventListener('load', () => {
            if (sessionStorage.getItem('nbkAdminAuth') === 'true') {
                const sessionTime = parseInt(sessionStorage.getItem('nbkAdminSession') || '0');
                const now = Date.now();
                
                // Session expires after 8 hours
                if (now - sessionTime < 8 * 60 * 60 * 1000) {
                    systemState.isAuthenticated = true;
                    elements.adminToggle.checked = true;
                    systemState.adminMode = true;
                    elements.adminPanel.style.display = 'block';
                    elements.adminPanel.classList.add('active');
                    updateNavButton('navAdmin', true);
                }
            }
        });

        // Initialize when DOM is loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initApp);
        } else {
            initApp();
        }

        // Add sample data for first-time users
        setTimeout(() => {
            if (systemState.staffNotes.length === 0) {
                systemState.staffNotes = [
                    {
                        id: generateId(),
                        author: "System Admin",
                        date: formatDateTime(new Date()),
                        content: "Welcome to NBK Leave Rotation System v3.2! This system automatically manages staff leave rotations with real-time updates, light/dark mode, and admin authentication.",
                        timestamp: new Date().toISOString()
                    },
                    {
                        id: generateId(),
                        author: "HR Department",
                        date: formatDateTime(new Date()),
                        content: "Important: All staff must complete mandatory 2-week leave. Submit reports within 3 days of returning.",
                        timestamp: new Date().toISOString()
                    },
                    {
                        id: generateId(),
                        author: DESIGNER,
                        date: formatDateTime(new Date()),
                        content: "System features: iOS design, light/dark mode, admin authentication, mobile navigation, device storage, countdown timers, auto-rotation, export functionality.",
                        timestamp: new Date().toISOString()
                    }
                ];
                saveAllData();
                renderNotes();
            }
        }, 2000);

        // Export functions (to be implemented)
        function exportTimeline() {
            showNotification('Export', 'Timeline export feature coming soon!', 'info');
        }

        function exportData() {
            showNotification('Export', 'Data export feature coming soon!', 'info');
        }

        function addStaff() {
            showNotification('Add Staff', 'Add staff feature coming soon!', 'info');
        }

        function updateStaffList() {
            showNotification('Update Staff', 'Update staff list feature coming soon!', 'info');
        }

        function editStaff(id) {
            showNotification('Edit Staff', 'Edit staff feature coming soon!', 'info');
        }

        function removeStaff(id) {
            showNotification('Remove Staff', 'Remove staff feature coming soon!', 'info');
        }

        function addNewNote() {
            showNotification('Add Note', 'Add note feature coming soon!', 'info');
        }

        function advanceRotation() {
            showNotification('Advance Rotation', 'Advance rotation feature coming soon!', 'info');
        }

        function markCurrentCompleted() {
            showNotification('Complete Current', 'Complete current leave feature coming soon!', 'info');
        }

        function saveSettings() {
            showNotification('Save Settings', 'Settings saved successfully!', 'success');
        }

        function resetSystem() {
            if (confirm('âš ï¸ WARNING: This will reset ALL system data. Are you sure?')) {
                localStorage.clear();
                sessionStorage.clear();
                location.reload();
            }
        }

        function autoAdvanceCheck() {
            // Auto-advance logic to be implemented
        }
    </script>
</body>
</html>